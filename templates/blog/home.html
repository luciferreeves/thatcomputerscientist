{% extends 'blog/partials/base.html' %} {% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<div id="welcome">
  <p>
    Welcome to the home of That Computer Scientist. My name is <a href="{% url 'blog:user_activity' 'bobby' %}">@bobby</a>, and this is my personal
    website. I aim to build a retro looking personal website, where I share my thoughts, ideas, and experiences through articles, and will showcase some cool nostalgic features and tools.
  </p>
  <p>
  Please note that I am continuously working on this site, and it is still under construction. So, not all features are available yet, and some features may not work as intended.
  </p>
  <p>
    There's also a some of <a href="#fun-stuff">fun stuff</a> you can find in the sidebar, that you can play around with. I will be adding more in the not so distant future.
    Also, To participate around various sections of the site, you will need to <a href="{% url 'blog:register' %}">register</a> for an account. I hope you enjoy your stay here.
  </p>
  <div id="chatbox">
    <div id="messages"></div>
    <textarea id="chatbox-input" placeholder="Type your message here... (⏎ to send)"></textarea>
  </div>
</div>
<img src="{% static 'images/gifs/construction.gif' %}" style="width: 730px;">
<div id="announcements">
  <img src = "{% static 'images/gifs/update.gif' %}" style="height: 14px;" id="update-gif">
  {% if announcements is not None %}
  <marquee behavior="scroll" direction="up" scrollamount="2" scrolldelay="20" onmouseover="this.stop()" onmouseout="this.start()">
    <ul>
      {% for announcement in announcements %}
      <li>
        <span>
          {% if announcement.is_new %}
            <img class="ac" src="{% static 'images/gifs/new_announcement.gif' %}"/>
          {% else %}
            <img class="ac2" src="{% static 'images/gifs/hand.gif' %}"/>
          {% endif %}
        </span>
        <span>
          <b>{{ announcement.created_at | date:"M d, Y" }}</b>: {{ announcement.content | safe }}
        </span>
      </li>
      <br><br>
      {% endfor %}
    </ul>
  </marquee>
  {% endif %}
</div>
<div id="fake-banner-ad" class="mtctitem">
  {% load ad %}
  <img src="{{'banner'|ad }}" alt="Ad" style="width: 720px;" border="0"/>
</div>
{% if posts %}
<div id="recent-posts" class="mtctitem">
  <h2>Recent Posts</h2>
  {% include 'blog/partials/post_list.html' %}
</div>
{% endif %}
{% endblock %}

{% block scripts %}
{% include 'blog/partials/mathjax.html' %}
<script type="text/javascript">
  var username = "{{ user.username }}" ? "{{ user.username }}" : "Anonymous";
  $(document).ready(function() {
      $('#chatbox-input').on('keyup', function(e) {
          if (e.keyCode === 13) {
              var msg = $('#chatbox-input').val();
              if (msg.trim().length > 0) {
                  var message = document.createElement("div");
                  message.className = "message";
                  message.innerHTML = "<b>" + username + "</b>: " + msg;
                  $('#messages').append(message);
                  $('#messages').animate({scrollTop: $('#messages').prop("scrollHeight")}, 100);
              }
              $('#chatbox-input').val("");
          } 
      });
  });
</script>
{% endblock %}

