{% extends 'blog/partials/base.html' %} {% block content %}
{% load remove_tags %}
<div class="main">
    <section>
      {% include 'blog_admin/partials/posts_topbar.html' %}
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Author</th>
            <th>Created</th>
            <th>Category</th>
            <th>Visibility</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for post in posts %}
          <tr>
            <td><a href="{% url 'blog:post' post.slug %}">{{ post.title }}</a></td>
            <td>{{ post.body|truncatechars:50|remove_tags }}</td>
            <td>{{ post.author }}</td>
            <td>{{ post.date }}</td>
            <td><a href="#">{{ post.category }}</a></td>
            <td style="position: relative;"> {% if post.is_public %} <span class="label label-success">Published</span> {% else %} <span class="label label-warning">Draft</span> {% endif %} </td>
            <td>
              <a href="{% url 'blog-admin:edit-post' post.slug %}">Edit</a>
              <a href="#" class="error">Delete</a>
              {% if post.is_public %}
              <a href="{% url 'blog-admin:unpublish-post' post.slug %}" class="error">Unpublish</a>
              {% else %}
              <a href="{% url 'blog-admin:publish-post' post.slug %}" class="success">Publish</a>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% if num_pages and page %}
        <div class="pagination">
            {% if page == 1 %}
                <a href="#" class="disabled">&laquo;</a>
                <a href="#" class="disabled">&lsaquo;</a>
            {% else %}
                <a href="{% url 'blog-admin:posts'%}?page=1">&laquo;</a>
                <a href="{% url 'blog-admin:posts'%}?page={{ page|add:-1 }}">&lsaquo;</a>
            {% endif %}
            {% for i in num_pages|make_list  %}
                <a href="{% url 'blog-admin:posts'%}?page={{ i }}">{{ i }}</a>
            {% endfor %}
            {% if page == num_pages %}
                <a href="#" class="disabled">&rsaquo;</a>
                <a href="#" class="disabled">&raquo;</a>
            {% else %}
                <a href="{% url 'blog-admin:posts'%}?page={{ page|add:1 }}">&rsaquo;</a>
                <a href="{% url 'blog-admin:posts'%}?page={{ num_pages }}">&raquo;</a>
            {% endif %}
        </div>
    {% endif %}
    </section>
</div>
{% endblock %}
