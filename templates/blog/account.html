{% extends 'blog/partials/base.html' %} {% block content %}
<div class="main">
    <h1>My Account</h1>
    <p>You can change account settings for <strong>{{ user.username }}</strong> here. If you wish to have additional support, please contact me at <a href="mailto:support@thatcomputerscientist.com?subject=[URGENT]%20Support%20Request%20for%20{{ user.username }}">support@thatcomputerscientist.com</a>. Please take care of the following points before you submit your support request:</p>
    <ul>
        <li>Please do not edit the subject line.</li>
        <li>As an individual monitoring this email, I request you to refrain yourself from spamming.</li>
        <li>Please do not include any sensitive information (like credit card numbers, passwords, etc.) in the email.</li>
        <li>Allow me upto 48 hours to respond to your support request.</li>
        <li>Do not send multiple support requests.</li>
        <li>Please note that this is a support request related to your account. Please do not file any bugs here. If you have noticed a bug, please report it to the <a href="https://github.com/luciferreeves/thatcomputerscientist/issues">GitHub Issues</a> page.</li>
    </ul>
    <p>Your avatar is fetched from gravatar. Update your gravatar email to fetch the avatar. If you don't have an account, you can sign up for one <a href="https://en.gravatar.com/" target="_blank">here</a>. If you haven't set up your gravatar email, we would try to fetch your profile picture from your account email, by default. If your account email and gravatar email are the same, you do not need to set a gravatar email.</p>
    {% if user_subdomain_url %}
    {% load replace %}
    <div class="alert" style="padding: 0 10px">
        <p>Your account is publicly accessible at <a href="{{ user_subdomain_url }}">{{ user_subdomain_url|replace:"https://"|replace:"http://" }}</a>. If you wish to change your account to private, you can do so below.</p>
    </div>
    {% endif %}
    {% for message in messages %}
        <div class="alert {{message.tags}}">
            <p>{{ message }}</p>
        </div>
    {% endfor %}
    <div class="account">
        <div class="ac-sidebar">
            <fieldset>
                <legend>Avatar</legend>
                <img src="https://www.gravatar.com/avatar/{{avatar}}?s=200" alt="{{ user.username }}'s avatar" width="200" height="200"/>
            </fieldset>
            <form method="post" action="{% url 'users:changepassword' %}">
                {% csrf_token %}
                <fieldset>
                    <legend>Change Password</legend>
                    <label for="oldPassword">Current Password</label>
                    <input type="password" name="oldPassword" id="oldPassword" placeholder="Current Password" />
                    <label for="newPassword">New Password</label>
                    <input type="password" name="newPassword" id="newPassword" placeholder="New Password" />
                    <label for="confirmPassword">Confirm New Password</label>
                    <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm New Password" />
                    <input type="submit" value="Change Password" />
                </fieldset>
            </form>
            <form method="post" onsubmit="event.preventDefault();">
                <fieldset>
                    <legend class="error">Delete Account</legend>
                    <input type="submit" value="Delete Account" />
                </fieldset>
            </form>
        </div>
        <div class="ac-main">
            <form method="post" action="{% url 'users:update' %} ">
                {% csrf_token %}
                <fieldset>
                    <legend>Account Details</legend>
                    <label for="firstname">First Name</label>
                    <input type="text" name="firstname" id="firstname" value="{{ user.first_name }}" placeholder="First Name" />
                    <label for="lastname">Last Name</label>
                    <input type="text" name="lastname" id="lastname" value="{{ user.last_name }}" placeholder="Last Name" />
                    <label for="gravatarEmail">Gravatar Email</label>
                    <input type="text" name="gravatarEmail" id="gravatarEmail" value="{{ user_profile.gravatar_email }}" placeholder="Gravatar Email" />
                    <label for="location">Location</label>
                    <input type="text" name="location" id="location" value="{{ user_profile.location }}" placeholder="Location" maxlength="50"/>
                    <label for="bio">Bio</label>
                    <textarea name="bio" id="bio" placeholder="Bio">{{ user_profile.bio }}</textarea>
                    {% comment %} <label for="isPublic">Account Visibility</label>
                    <select name="isPublic" id="isPublic">
                        <option value="1"{% if user_profile.is_public %} selected{% endif %}>Public</option>
                        <option value="0"{% if not user_profile.is_public %} selected{% endif %}>Private</option>
                    </select>
                    {% if user_profile.is_public %}
                        <label for="emailPublic">Email Visibility</label>
                        <select name="emailPublic" id="emailPublic">
                            <option value="1"{% if user_profile.email_public %} selected{% endif %}>Public</option>
                            <option value="0"{% if not user_profile.email_public %} selected{% endif %}>Private</option>
                        </select>
                    {% endif %} {% endcomment %}
                    <input type="submit" value="Update Account" />
                </fieldset>
            </form>
            <form method="post" action = "{% url 'users:sendchangeuseremail' %}">
                {% csrf_token %}
                <fieldset>
                    <legend>Change Email</legend>
                    <label for="email">Your current registered email is <em><u>{{ user.email }}</u></em>. Please note that a verification email will be sent to the new email address in order to update the current email address. Please provide the new email address in the box below:</label>
                    <input type="email" name="email" id="email" placeholder="New Email" />
                    <input type="submit" value="Change Email" />
                </fieldset>
            </form>
        </div>
    </div>
</div>
{% endblock %}
